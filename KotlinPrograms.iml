private fun isSameNumberRepeated(pin: String): Boolean {
    // Case 1: 3 or more same digits
    if (pin.groupingBy { it }.eachCount().any { it.value >= 3 }) {
        return true
    }

    // Case 2: AABB pattern for 4-digit PINs
    return pin.length == 4 && pin[0] == pin[1] && pin[2] == pin[3] && pin[0] != pin[2]
}