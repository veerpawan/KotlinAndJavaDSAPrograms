@Composable
fun PreLoginScreen(viewModel: YourViewModel = viewModel()) {
    val navController = rememberNavController()
    val isLoggedIn by viewModel.isLoggedIn.collectAsState()

    var shouldRenderGraph by remember { mutableStateOf(false) }
    var dynamicStartDestination by remember { mutableStateOf("onboarding") }

    // Once we know the value, set the flag and route
    LaunchedEffect(isLoggedIn) {
        dynamicStartDestination = if (isLoggedIn) "login" else "onboarding"
        shouldRenderGraph = true
    }

    if (shouldRenderGraph) {
        NavHost(
            navController = navController,
            startDestination = dynamicStartDestination
        ) {
            composable("onboarding") { OnboardingScreen(navController) }
            composable("login") { LoginScreen(navController) }
        }
    } else {
        // Show a splash/loading inside PreLoginScreen
        Box(modifier = Modifier.fillMaxSize(), contentAlignment = Alignment.Center) {
            CircularProgressIndicator()
        }
    }
}